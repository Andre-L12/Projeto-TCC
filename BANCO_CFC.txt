CREATE DATABASE BANCO_CFC;
USE BANCO_CFC;

CREATE TABLE Funcionario (
    nome VARCHAR(100),
    cpf VARCHAR(14),
    senha VARCHAR(50),
    matricula varchar(7) PRIMARY KEY,
    foto BLOB
);

CREATE TABLE Aluno (
    email VARCHAR(100),
    celular VARCHAR(14),
    cpf VARCHAR(14) unique,
    nome VARCHAR(100),
    id INT PRIMARY KEY auto_increment,
    foto BLOB
);

CREATE TABLE Instrutor (
    nome VARCHAR(100),
    cpf VARCHAR(14) unique,
    sexo CHAR(1),
    id_instrutor int PRIMARY KEY auto_increment
);

CREATE TABLE Veiculo (
    sigla_categoria CHAR(3),
    adaptado BOOLEAN,
    placa VARCHAR(7) PRIMARY KEY,
    marca VARCHAR(30),
    modelo VARCHAR(30)
);
CREATE TABLE Veiculo_Instrutor (
	cpf_instrutor varchar(14),
    placa_veiculo varchar(7),
    
    FOREIGN KEY (cpf_instrutor) REFERENCES Instrutor(cpf),
    FOREIGN KEY (placa_veiculo) REFERENCES Veiculo(placa)
);

CREATE TABLE Etapa (
    nome VARCHAR(100),
    id CHAR(1) PRIMARY KEY
);

CREATE TABLE Curso (
    sigla VARCHAR(5) PRIMARY KEY,
    descricao VARCHAR(100),
    categoria CHAR(2)
);

CREATE TABLE Curso_Instrutor (
    sigla_curso VARCHAR(5),
    cpf_instrutor varchar(14),

    FOREIGN KEY (cpf_instrutor) REFERENCES Instrutor(cpf),
    FOREIGN KEY (sigla_curso) REFERENCES Curso(sigla)
);

CREATE TABLE Processo (
    curso VARCHAR(5),
    cpf_aluno VARCHAR(14),
    data_inicio DATE,
    id_processo INT PRIMARY KEY auto_increment,
    
    FOREIGN KEY (cpf_aluno) REFERENCES Aluno(cpf),
    FOREIGN KEY (curso) REFERENCES Curso(sigla)
);

CREATE TABLE Etapa_Curso (
    etapa CHAR(1),
    curso CHAR(1),
    ordem_curso INT,
    id_etapa_curso INT PRIMARY KEY,
    
    FOREIGN KEY (etapa) REFERENCES Etapa(id),
    FOREIGN KEY (curso) REFERENCES Curso(sigla)
);

CREATE TABLE Curso_Instrutor (
    cpf_instrutor VARCHAR(14),
    sigla_curso CHAR(1),
    id_curso_instrutor INT PRIMARY KEY,
    dias_semana VARCHAR(7),
    
    FOREIGN KEY (cpf_instrutor) REFERENCES Instrutor(cpf),
    FOREIGN KEY (sigla_curso) REFERENCES Curso(sigla)
);

CREATE TABLE AulaPratica (
    cpf_instrutor VARCHAR(14),
    cpf_aluno VARCHAR(14),
    id_processo INT,
    placa VARCHAR(7),
    data_aula DATE,
    hora TIME,
    status_detran INT,
    id INT PRIMARY KEY,
    obrigatoria BOOLEAN,
    
    FOREIGN KEY (cpf_instrutor) REFERENCES Instrutor(cpf),
    FOREIGN KEY (cpf_aluno) REFERENCES Aluno(cpf),
    FOREIGN KEY (placa) REFERENCES Veiculo(placa),
    FOREIGN KEY (id_processo) REFERENCES Processo(id_processo)
);
INSERT INTO `BANCO_CFC`.`curso` (`sigla`, `descricao`, `categoria`) VALUES ('PHA', 'Primeira Habilitação A', 'A');
INSERT INTO `BANCO_CFC`.`curso` (`sigla`, `descricao`, `categoria`) VALUES ('PHB', 'Primeira Habilitação B', 'B');
INSERT INTO `BANCO_CFC`.`curso` (`sigla`, `descricao`, `categoria`) VALUES ('PHAB', 'Primeira Habilitação AB', 'AB');
INSERT INTO `BANCO_CFC`.`curso` (`sigla`, `descricao`, `categoria`) VALUES ('RA', 'Reciclagem A', 'A');
INSERT INTO `BANCO_CFC`.`curso` (`sigla`, `descricao`, `categoria`) VALUES ('RB', 'Reciclagem B', 'B');
INSERT INTO `BANCO_CFC`.`curso` (`sigla`, `descricao`, `categoria`) VALUES ('RAB', 'Reciclagem AB', 'AB');
INSERT INTO `BANCO_CFC`.`curso` (`sigla`, `descricao`, `categoria`) VALUES ('RC', 'Reciclagem C', 'C');
INSERT INTO `BANCO_CFC`.`curso` (`sigla`, `descricao`, `categoria`) VALUES ('RD', 'Reciclagem D', 'D');
INSERT INTO `BANCO_CFC`.`curso` (`sigla`, `descricao`, `categoria`) VALUES ('RE', 'Reciclagem E', 'E');
INSERT INTO `BANCO_CFC`.`curso` (`sigla`, `descricao`, `categoria`) VALUES ('ADA', 'Adição de Categoria A', 'A');
INSERT INTO `BANCO_CFC`.`curso` (`sigla`, `descricao`, `categoria`) VALUES ('ADB', 'Adição de Categoria B', 'B');
INSERT INTO `BANCO_CFC`.`curso` (`sigla`, `descricao`, `categoria`) VALUES ('ADC', 'Adição de Categoria C', 'C');
INSERT INTO `BANCO_CFC`.`curso` (`sigla`, `descricao`, `categoria`) VALUES ('MD', 'Mudança de Categoria D', 'D');
INSERT INTO `BANCO_CFC`.`curso` (`sigla`, `descricao`, `categoria`) VALUES ('ME', 'Mudança de Categoria E', 'E');


